<!-- music/templates/music/_music_edit_layout.html -->

<section class="container mx-auto px-6 py-8">
  <div class="flex flex-wrap items-center justify-between gap-3">
    <div>
      <h1 class="text-3xl font-semibold">Edit Music</h1>
      <p class="text-sm opacity-70">{{ music.title }}</p>
    </div>
    <div class="flex flex-wrap gap-2">
      <a class="btn btn-ghost btn-sm" href="{% url 'music:music_detail' music.pk %}">Back to details</a>
      <a class="btn btn-ghost btn-sm" href="{% url 'music:music_list' %}">Back to list</a>
    </div>
  </div>

  <div class="grid gap-6 mt-6 lg:grid-cols-3">
    <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-2">
      <div class="card-body">
        <h2 class="card-title">Music Details</h2>
        <div class="mt-3">
          {% include "music/_music_form.html" %}
        </div>
      </div>
    </div>

    <div class="space-y-6">
      {% include "music/_music_edit_genres_panel.html" %}
      {% include "music/_music_edit_roles_panel.html" %}
      {% include "music/_music_edit_orgs_panel.html" %}
    </div>
  </div>
</section>

<dialog id="music-genres-modal" class="modal">
  <div class="modal-box max-w-3xl">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3">✕</button>
    </form>
    <div id="music-genres-modal-body"></div>
  </div>
</dialog>

<dialog id="music-roles-modal" class="modal" {% if open_roles_modal %}open{% endif %}>
  <div class="modal-box max-w-4xl">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3">✕</button>
    </form>
    <div id="music-roles-modal-body"></div>
  </div>
</dialog>

{% if open_roles_modal %}
  <div
    hx-get="{% url 'music:music_roles_edit' music.pk %}"
    hx-target="#music-roles-modal-body"
    hx-trigger="load"
  ></div>
{% endif %}

<dialog id="music-orgs-modal" class="modal">
  <div class="modal-box max-w-4xl">
    <form method="dialog">
      <button class="btn btn-sm btn-circle btn-ghost absolute right-3 top-3">✕</button>
    </form>
    <div id="music-orgs-modal-body"></div>
  </div>
</dialog>
