<!-- music/templates/music/music_list.html -->

{% extends 'base.html' %}

{% block content %}
<h1>Music Library</h1>

<form method="get" class="music_filters">
  <fieldset>
    <legend>Search & Filters</legend>

    <!-- Search -->
    <div>
      <label for="id_q">Search</label>
      <input
        type="text"
        name="q"
        id="id_q"
        value="{{ q }}"
        placeholder="Title, composer, arranger, etc."
        />
    </div>

    <!-- Genre filter -->
    <div>
      <label for="id_genre">Genre</label>
      <select name="genre" id="id_genre">
        <option value="">All genres</option>
        {% for genre in genres %}
          <option value="{{ genre.id }}"
             {% if genre.id == selected_genre %}selected{% endif %}
          >
            {{ genre.name }}
        </option>
        {% endfor %}
      </select>
    </div>

    <!-- Score missing -->
    <div>
      <label for="id_score_missing">Score missing</label>
      <select name="score_missing" id="id_score_missing">
        <option value="">Any</option>
        <option value="1" {% if score_missing == "1" %}selected{% endif %}>
        Yes
        </option>
        <option value="0" {%if score_missing == "0" %}selected{% endif %}>
        No
        </option>
      </select>
    </div>

    <!-- Needs review -->
    <div>
      <label for="id_needs_review">Needs review</label>
      <select name="needs_review" id="id_needs_review">
        <option value="">All</option>
        <option value="1" {% if needs_review == "1" %}selected{% endif %}>
          Yes
        </option>
        <option value="0" {% if needs_review == "0" %}selected{% endif %}>
          No
        </option>
      </select>
    </div>

    <div>
      <button type="submit">Apply</button>
      <a href="{% url 'music:music_list' %}">Clear</a>
    </div>
  </fieldset>
</form>

<hr />

<div id="music-table-container">
  {% include 'music/_music_list_table.html' %}
</div>

{% endblock %}
