<!-- people/templates/people/person_detail.html -->

{% extends 'base.html' %}
{% load people_extras %}

{% block title %}People{% endblock %}

{% block content %}
<section class="container mx-auto px-6 py-8">
  <div class="flex flex-wrap items-center justify-between gap-3">
    <div>
      <h1 class="text-3xl font-semibold">
        {% if person.display_name %}
          {{ person.display_name }}
        {% else %}
          {{ person.last_name }}
        {% endif %}
      </h1>
      <p class="text-sm opacity-70">Person detail</p>
    </div>
    <div class="flex flex-wrap gap-2">
      {% if request.user.is_staff %}
        <a class="btn btn-primary btn-sm" href="{% url 'people:person_edit' person.pk %}">Edit</a>
      {% endif %}
      <a class="btn btn-ghost btn-sm" href="{% url 'people:person_list' %}">Back to list</a>
    </div>
  </div>

  <div class="grid gap-6 mt-6 lg:grid-cols-3">
    <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-2">
      <div class="card-body">
        <h2 class="card-title">Basic Information</h2>
        <dl class="mt-3 grid gap-4 sm:grid-cols-2 text-sm">
          <div>
            <dt class="text-xs uppercase opacity-60">Type</dt>
            <dd class="mt-1">{{ person.get_person_type_display|default:"--" }}</dd>
          </div>
          <div>
            <dt class="text-xs uppercase opacity-60">Status</dt>
            <dd class="mt-1">{{ person.is_active|yesno:"Active,Inactive" }}</dd>
          </div>
          <div>
            <dt class="text-xs uppercase opacity-60">Needs Review</dt>
            <dd class="mt-1">{{ person.needs_review|yesno:"Yes,No" }}</dd>
          </div>
          <div>
            <dt class="text-xs uppercase opacity-60">Birth Date</dt>
            <dd class="mt-1">{{ person.birth_date|date:"F d, Y"|default:"--" }}</dd>
          </div>
          <div>
            <dt class="text-xs uppercase opacity-60">Death Date</dt>
            <dd class="mt-1">{{ person.death_date|date:"F d, Y"|default:"--" }}</dd>
          </div>
        </dl>
      </div>
    </div>

    <div class="card bg-base-100 shadow-sm border border-base-200">
      <div class="card-body">
        <h2 class="card-title">Notes</h2>
        <div class="mt-3 text-sm">
          {% if person.notes %}
            {{ person.notes|linebreaks }}
          {% else %}
            <span class="opacity-60">No notes added.</span>
          {% endif %}
        </div>
      </div>
    </div>

    <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-3">
      <div class="card-body">
        <h2 class="card-title">Music Roles</h2>
        <div class="mt-3">
          {% include "people/_music_roles.html" %}
        </div>
      </div>
    </div>

    <div class="card bg-base-100 shadow-sm border border-base-200 lg:col-span-3">
      <div class="card-body">
        <h2 class="card-title">Concert Roles</h2>
        <div class="mt-3">
          {% include "people/_concert_roles.html" %}
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}
